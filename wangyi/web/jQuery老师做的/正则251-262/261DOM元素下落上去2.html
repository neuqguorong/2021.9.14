<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <style>
        #d1{width: 200px;height: 200px;-background: black;margin: auto;}
    </style>
</head>
<body>
    <div id="d1"></div>
    <script>
        var x=10,y=10;
        for(var i=0;i<y;i++)
        {
            for(var j=0;j<x;j++)
            {
                var odiv=document.createElement('div');
                /* w=d1.offsetWidth/x+'px',h=d1.offsetHeight/y+'px';
                odiv.style.cssText='width:w;height:h;background:black;float:left;position:relative;'; */
                odiv.style.cssText='background:black;float:left;position:relative;';
                odiv.style.width=d1.offsetWidth/x+'px';
                odiv.style.height=d1.offsetHeight/y+'px';
                odiv.style.transition=((Math.random()*0.3)+0.1)+"s all ease";
                d1.appendChild(odiv);
            }
        }

        var t=null;
        var t1=null;
        onclick=function(){
            var i=x*y-1;
            clearInterval(t);
            t=setInterval(function(){
                d1.children[i].style.top='300px';
                d1.children[i].style.background='rgb('+parseInt(Math.random()*256)+','+parseInt(Math.random()*256)+','+parseInt(Math.random()*256)+')';
                i--;                    
                if(i==-1)
                {
                    clearInterval(t);
                    i=0;
                    return;                                        
                };
            },30);
            
            clearTimeout(t1);
            t1=setTimeout(function(){
                setInterval(function(){
                    if(i==x*y)
                    {
                        return;                    
                    };
                    d1.children[i].style.top=0;
                    d1.children[i].style.background='black';
                    i++;

                },30);
            },30*(x*y+10));
        }
    
    </script>
</body>
</html>